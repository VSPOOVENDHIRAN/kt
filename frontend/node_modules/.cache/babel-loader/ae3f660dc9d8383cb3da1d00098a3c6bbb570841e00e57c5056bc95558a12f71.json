{"ast":null,"code":"import { io } from \"socket.io-client\";\nconst API_URL = \"http://localhost:5001\";\n\n// 1. Get the JWT token from localStorage\nconst token = localStorage.getItem(\"token\");\n\n// 2. Initialize the socket, passing the token in the 'auth' field.\n// This is the standard way to pass authentication data during the handshake.\nconst socket = io(API_URL, {\n  autoConnect: true,\n  reconnection: true,\n  // ⚡ Crucial addition for authentication\n  auth: {\n    token: token\n  }\n\n  // You might need to add a 'forceNew: true' flag if the socket \n  // needs to be re-established after login/logout, but the current \n  // setup might rely on the global import.\n});\nexport default socket;","map":{"version":3,"names":["io","API_URL","token","localStorage","getItem","socket","autoConnect","reconnection","auth"],"sources":["E:/kalanjiyam_demo/frontend/src/socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\r\n\r\nconst API_URL = \"http://localhost:5001\";\r\n\r\n// 1. Get the JWT token from localStorage\r\nconst token = localStorage.getItem(\"token\");\r\n\r\n// 2. Initialize the socket, passing the token in the 'auth' field.\r\n// This is the standard way to pass authentication data during the handshake.\r\nconst socket = io(API_URL, {\r\n  autoConnect: true,\r\n  reconnection: true,\r\n  \r\n  // ⚡ Crucial addition for authentication\r\n  auth: {\r\n    token: token,\r\n  },\r\n  \r\n  // You might need to add a 'forceNew: true' flag if the socket \r\n  // needs to be re-established after login/logout, but the current \r\n  // setup might rely on the global import.\r\n});\r\n\r\nexport default socket;"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,OAAO,GAAG,uBAAuB;;AAEvC;AACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;AAE3C;AACA;AACA,MAAMC,MAAM,GAAGL,EAAE,CAACC,OAAO,EAAE;EACzBK,WAAW,EAAE,IAAI;EACjBC,YAAY,EAAE,IAAI;EAElB;EACAC,IAAI,EAAE;IACJN,KAAK,EAAEA;EACT;;EAEA;EACA;EACA;AACF,CAAC,CAAC;AAEF,eAAeG,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}